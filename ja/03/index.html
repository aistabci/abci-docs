<!doctype html><html lang="ja" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="ABCI Users Guide, Japanese version"><link rel="canonical" href="https://docs.abci.ai/ja/03/"><meta name="author" content="AIST"><meta name="lang:clipboard.copy" content="クリップボードへコピー"><meta name="lang:clipboard.copied" content="コピーしました"><meta name="lang:search.language" content="ja"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="何も見つかりませんでした"><meta name="lang:search.result.one" content="1件見つかりました"><meta name="lang:search.result.other" content="#件見つかりました"><meta name="lang:search.tokenizer" content="[\s\-　、。，．]+"><link rel="shortcut icon" href="../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>3. ジョブ実行環境 - ABCI Users Guide</title><link rel="stylesheet" href="../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css"><meta name="theme-color" content="#ef5350"><script src="../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=swap"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../assets/fonts/material-icons.css"><script>window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-118371652-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body dir="ltr" data-md-color-primary="red" data-md-color-accent="red"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#3" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://docs.abci.ai/ja/" title="ABCI Users Guide" class="md-header-nav__button md-logo"><i class="md-icon">cloud</i></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">ABCI Users Guide</span><span class="md-header-nav__topic">3. ジョブ実行環境</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">検索キーワードを入力してください</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/aistairc/abci-docs/" title="リポジトリへ" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div></div></div></nav></header><div class="md-container"><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://docs.abci.ai/ja/" title="ABCI Users Guide" class="md-nav__button md-logo"><i class="md-icon">cloud</i></a>ABCI Users Guide</label><div class="md-nav__source"><a href="https://github.com/aistairc/abci-docs/" title="リポジトリへ" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href=".." title="はじめに" class="md-nav__link">はじめに</a></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked><label class="md-nav__link" for="nav-2">利用手引き</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">利用手引き</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../01/" title="1. ABCIシステムの概要" class="md-nav__link">1. ABCIシステムの概要</a></li><li class="md-nav__item"><a href="../02/" title="2. ABCIシステム利用環境" class="md-nav__link">2. ABCIシステム利用環境</a></li><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">3. ジョブ実行環境</label><a href="./" title="3. ジョブ実行環境" class="md-nav__link md-nav__link--active">3. ジョブ実行環境</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目次</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#job-services" title="3.1. ジョブサービスメニュー" class="md-nav__link">3.1. ジョブサービスメニュー</a></li><li class="md-nav__item"><a href="#job-executing-resource" title="3.2. ジョブ実行リソース" class="md-nav__link">3.2. ジョブ実行リソース</a></li><li class="md-nav__item"><a href="#job-executing-options" title="3.3. ジョブ実行オプション" class="md-nav__link">3.3. ジョブ実行オプション</a></li><li class="md-nav__item"><a href="#interactive-jobs" title="3.4. インタラクティブ利用" class="md-nav__link">3.4. インタラクティブ利用</a></li><li class="md-nav__item"><a href="#batch-jobs" title="3.5. バッチ利用" class="md-nav__link">3.5. バッチ利用</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#submit-a-batch-job" title="3.5.1. バッチジョブの投入" class="md-nav__link">3.5.1. バッチジョブの投入</a></li><li class="md-nav__item"><a href="#show-the-status-of-batch-jobs" title="3.5.2. バッチジョブの状態の確認" class="md-nav__link">3.5.2. バッチジョブの状態の確認</a></li><li class="md-nav__item"><a href="#delete-a-batch-job" title="3.5.3. バッチジョブの削除" class="md-nav__link">3.5.3. バッチジョブの削除</a></li><li class="md-nav__item"><a href="#stdout-and-stderr-of-batch-jobs" title="3.5.4. バッチジョブの標準出力と標準エラー出力" class="md-nav__link">3.5.4. バッチジョブの標準出力と標準エラー出力</a></li><li class="md-nav__item"><a href="#report-batch-job-accounting" title="3.5.5. バッチジョブの統計情報出力" class="md-nav__link">3.5.5. バッチジョブの統計情報出力</a></li><li class="md-nav__item"><a href="#environment-variables" title="3.5.6. 環境変数" class="md-nav__link">3.5.6. 環境変数</a></li></ul></nav></li><li class="md-nav__item"><a href="#reservation" title="3.6. 事前予約" class="md-nav__link">3.6. 事前予約</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#make-a-reservation" title="3.6.1. 予約の実行" class="md-nav__link">3.6.1. 予約の実行</a></li><li class="md-nav__item"><a href="#show-the-status-of-reservations" title="3.6.2. 予約状態の確認" class="md-nav__link">3.6.2. 予約状態の確認</a></li><li class="md-nav__item"><a href="#cancel-a-reservation" title="3.6.3. 予約の取り消し" class="md-nav__link">3.6.3. 予約の取り消し</a></li></ul></nav></li></ul></nav></li><li class="md-nav__item"><a href="../04/" title="4. ストレージ" class="md-nav__link">4. ストレージ</a></li><li class="md-nav__item"><a href="../05/" title="5. Environment Modulesの利用" class="md-nav__link">5. Environment Modulesの利用</a></li><li class="md-nav__item"><a href="../06/" title="6. Pythonの利用" class="md-nav__link">6. Pythonの利用</a></li><li class="md-nav__item"><a href="../07/" title="7. GPUの利用" class="md-nav__link">7. GPUの利用</a></li><li class="md-nav__item"><a href="../08/" title="8. MPIの利用" class="md-nav__link">8. MPIの利用</a></li><li class="md-nav__item"><a href="../09/" title="9. Linuxコンテナ" class="md-nav__link">9. Linuxコンテナ</a></li><li class="md-nav__item"><a href="../10/" title="10. プログラム開発環境" class="md-nav__link">10. プログラム開発環境</a></li><li class="md-nav__item"><a href="../appendix1/" title="付録1. インストール済みソフトウェアの構成" class="md-nav__link">付録1. インストール済みソフトウェアの構成</a></li><li class="md-nav__item"><a href="../appendix2/" title="付録2. HPCIによるABCIシステム利用" class="md-nav__link">付録2. HPCIによるABCIシステム利用</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"><label class="md-nav__link" for="nav-3">各種アプリケーション</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">各種アプリケーション</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../apps/" title="概要" class="md-nav__link">概要</a></li><li class="md-nav__item"><a href="../apps/tensorflow/" title="TensorFlow" class="md-nav__link">TensorFlow</a></li><li class="md-nav__item"><a href="../apps/chainer/" title="Chainer" class="md-nav__link">Chainer</a></li><li class="md-nav__item"><a href="../apps/others/" title="その他" class="md-nav__link">その他</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"><label class="md-nav__link" for="nav-4">Tips</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">Tips</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../tips/remote-desktop/" title="リモートデスクトップの利用" class="md-nav__link">リモートデスクトップの利用</a></li><li class="md-nav__item"><a href="../tips/awscli/" title="AWS CLIの利用" class="md-nav__link">AWS CLIの利用</a></li><li class="md-nav__item"><a href="../tips/gcc-7.3.0/" title="GCC 7.3.0の利用" class="md-nav__link">GCC 7.3.0の利用</a></li><li class="md-nav__item"><a href="../tips/tera-term/" title="Tera Termの利用" class="md-nav__link">Tera Termの利用</a></li><li class="md-nav__item"><a href="../tips/putty/" title="PuTTYの利用" class="md-nav__link">PuTTYの利用</a></li><li class="md-nav__item"><a href="../tips/jupyter-notebook/" title="Jupyter Notebookの利用" class="md-nav__link">Jupyter Notebookの利用</a></li></ul></nav></li><li class="md-nav__item"><a href="../ngc/" title="NVIDIA GPU Cloud (NGC)" class="md-nav__link">NVIDIA GPU Cloud (NGC)</a></li><li class="md-nav__item"><a href="../faq/" title="FAQ" class="md-nav__link">FAQ</a></li><li class="md-nav__item"><a href="../known-issues/" title="既知の問題" class="md-nav__link">既知の問題</a></li><li class="md-nav__item"><a href="../system-updates/" title="システム更新履歴" class="md-nav__link">システム更新履歴</a></li><li class="md-nav__item"><a href="https://abci.ai/ja/about_abci/info.html" title="運転状況" class="md-nav__link">運転状況</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10"><label class="md-nav__link" for="nav-10">リンク</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-10">リンク</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="https://abci.ai/ja/" title="ABCI Webページ" class="md-nav__link">ABCI Webページ</a></li><li class="md-nav__item"><a href="https://docs.abci.ai/portal/ja/" title="ABCI利用ポータル手引き" class="md-nav__link">ABCI利用ポータル手引き</a></li><li class="md-nav__item"><a href="https://portal.abci.ai/user/project_register_app.php?lang=ja" title="ABCI利用ポータル(利用申請)" class="md-nav__link">ABCI利用ポータル(利用申請)</a></li><li class="md-nav__item"><a href="https://portal.abci.ai/user/login.php?lang=ja" title="ABCI利用ポータル(ログイン)" class="md-nav__link">ABCI利用ポータル(ログイン)</a></li></ul></nav></li><li class="md-nav__item"><a href="https://docs.abci.ai/en/" title="English version" class="md-nav__link">English version</a></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目次</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#job-services" title="3.1. ジョブサービスメニュー" class="md-nav__link">3.1. ジョブサービスメニュー</a></li><li class="md-nav__item"><a href="#job-executing-resource" title="3.2. ジョブ実行リソース" class="md-nav__link">3.2. ジョブ実行リソース</a></li><li class="md-nav__item"><a href="#job-executing-options" title="3.3. ジョブ実行オプション" class="md-nav__link">3.3. ジョブ実行オプション</a></li><li class="md-nav__item"><a href="#interactive-jobs" title="3.4. インタラクティブ利用" class="md-nav__link">3.4. インタラクティブ利用</a></li><li class="md-nav__item"><a href="#batch-jobs" title="3.5. バッチ利用" class="md-nav__link">3.5. バッチ利用</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#submit-a-batch-job" title="3.5.1. バッチジョブの投入" class="md-nav__link">3.5.1. バッチジョブの投入</a></li><li class="md-nav__item"><a href="#show-the-status-of-batch-jobs" title="3.5.2. バッチジョブの状態の確認" class="md-nav__link">3.5.2. バッチジョブの状態の確認</a></li><li class="md-nav__item"><a href="#delete-a-batch-job" title="3.5.3. バッチジョブの削除" class="md-nav__link">3.5.3. バッチジョブの削除</a></li><li class="md-nav__item"><a href="#stdout-and-stderr-of-batch-jobs" title="3.5.4. バッチジョブの標準出力と標準エラー出力" class="md-nav__link">3.5.4. バッチジョブの標準出力と標準エラー出力</a></li><li class="md-nav__item"><a href="#report-batch-job-accounting" title="3.5.5. バッチジョブの統計情報出力" class="md-nav__link">3.5.5. バッチジョブの統計情報出力</a></li><li class="md-nav__item"><a href="#environment-variables" title="3.5.6. 環境変数" class="md-nav__link">3.5.6. 環境変数</a></li></ul></nav></li><li class="md-nav__item"><a href="#reservation" title="3.6. 事前予約" class="md-nav__link">3.6. 事前予約</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#make-a-reservation" title="3.6.1. 予約の実行" class="md-nav__link">3.6.1. 予約の実行</a></li><li class="md-nav__item"><a href="#show-the-status-of-reservations" title="3.6.2. 予約状態の確認" class="md-nav__link">3.6.2. 予約状態の確認</a></li><li class="md-nav__item"><a href="#cancel-a-reservation" title="3.6.3. 予約の取り消し" class="md-nav__link">3.6.3. 予約の取り消し</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/aistairc/abci-docs/edit/master/ja/docs/03.md" title="編集" class="md-icon md-content__icon">&#xE3C9;</a><h1 id="3">3. ジョブ実行環境</h1>
<h2 id="job-services">3.1. ジョブサービスメニュー</h2>
<p>ABCIシステムでは、以下のジョブサービスが利用可能です。</p>
<table>
<thead>
<tr>
<th align="left">サービス名</th>
<th align="left">説明</th>
<th align="left">サービス課金係数</th>
<th align="left">利用形態</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Spot</td>
<td align="left">バッチ実行型ジョブサービス</td>
<td align="left">1.0</td>
<td align="left">バッチ利用</td>
</tr>
<tr>
<td align="left">On-demand</td>
<td align="left">インタラクティブ実行型ジョブサービス</td>
<td align="left">1.0</td>
<td align="left">インタラクティブ利用</td>
</tr>
<tr>
<td align="left">Reserved</td>
<td align="left">事前予約型ジョブサービス</td>
<td align="left">1.5</td>
<td align="left">バッチ利用、インタラクティブ利用</td>
</tr>
</tbody>
</table>
<p>SpotサービスおよびOn-demandサービスでは、ジョブ実行開始時にジョブが使用予定のABCIポイントを経過時間制限値を元に計算し、
減算処理を実施します。
ジョブ実行終了時に実際の経過時間を元にABCIポイントを再計算し、返却処理を実施します。</p>
<p>Reservedサービスでは、予約完了時に予約期間を元にABCIポイントを計算し、減算処理を実施します。予約を取消しない限り、返却処理は実施しません。</p>
<h2 id="job-executing-resource">3.2. ジョブ実行リソース</h2>
<p>ABCIシステムでは計算ノードを論理的に分割した資源タイプを利用して、ジョブにシステムリソースを割り当てます。
ジョブを投入/実行する際には、資源タイプ名を指定します。</p>
<table>
<thead>
<tr>
<th align="left">資源タイプ</th>
<th align="left">資源タイプ名</th>
<th align="left">説明</th>
<th align="left">割り当て物理CPUコア数</th>
<th align="left">割り当てGPU数</th>
<th align="left">メモリ (GiB)</th>
<th align="left">ローカルストレージ (GB)</th>
<th align="left">資源タイプ課金係数</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Full</td>
<td align="left">rt_F</td>
<td align="left">ノード占有</td>
<td align="left">40</td>
<td align="left">4</td>
<td align="left">360</td>
<td align="left">1440</td>
<td align="left">1.00</td>
</tr>
<tr>
<td align="left">G.large</td>
<td align="left">rt_G.large</td>
<td align="left">ノード共有<br>GPU利用</td>
<td align="left">20</td>
<td align="left">4</td>
<td align="left">240</td>
<td align="left">720</td>
<td align="left">0.90</td>
</tr>
<tr>
<td align="left">G.small</td>
<td align="left">rt_G.small</td>
<td align="left">ノード共有<br>GPU利用</td>
<td align="left">5</td>
<td align="left">1</td>
<td align="left">60</td>
<td align="left">180</td>
<td align="left">0.30</td>
</tr>
<tr>
<td align="left">C.large</td>
<td align="left">rt_C.large</td>
<td align="left">ノード共有<br>CPUのみ利用</td>
<td align="left">20</td>
<td align="left">0</td>
<td align="left">120</td>
<td align="left">720</td>
<td align="left">0.60</td>
</tr>
<tr>
<td align="left">C.small</td>
<td align="left">rt_C.small</td>
<td align="left">ノード共有<br>CPUのみ利用</td>
<td align="left">5</td>
<td align="left">0</td>
<td align="left">30</td>
<td align="left">180</td>
<td align="left">0.20</td>
</tr>
</tbody>
</table>
<p>複数ノードを使用するジョブを実行する場合は、計算ノードを占有する資源タイプ<code>rt_F</code>を指定してください。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ノード共有の資源タイプでは、ジョブのプロセス情報は同一ノードで実行されている他のジョブから参照可能となります。
他のジョブから参照させたくない場合、資源タイプ<code>rt_F</code>を指定しノード占有でジョブを実行ください。</p>
</div>
<p>サービス毎に利用可能な資源タイプ名および個数を以下に示します。</p>
<table>
<thead>
<tr>
<th align="left">サービス名</th>
<th align="left">資源タイプ名</th>
<th align="left">個数の範囲</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Spot</td>
<td align="left">rt_F</td>
<td align="left">1-512</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.small</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">On-demand</td>
<td align="left">rt_F</td>
<td align="left">1-32</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.small</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Reserved</td>
<td align="left">rt_F</td>
<td align="left">1-予約ノード数</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.large</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_C.small</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<p>サービス毎のジョブ経過時間制限を以下に示します。</p>
<table>
<thead>
<tr>
<th align="left">サービス名</th>
<th align="left">資源タイプ名</th>
<th align="left">経過時間制限 (上限値/デフォルト)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Spot</td>
<td align="left">rt_F</td>
<td align="left">72:00:00/1:00:00</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large, rt_C.large</td>
<td align="left">72:00:00/1:00:00</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small, rt_C.small</td>
<td align="left">168:00:00/1:00:00</td>
</tr>
<tr>
<td align="left">On-demand</td>
<td align="left">rt_F</td>
<td align="left">12:00:00/1:00:00</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large, rt_C.large</td>
<td align="left">12:00:00/1:00:00</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small, rt_C.small</td>
<td align="left">12:00:00/1:00:00</td>
</tr>
<tr>
<td align="left">Reserved</td>
<td align="left">rt_F</td>
<td align="left">無制限</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.large, rt_C.large</td>
<td align="left">無制限</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">rt_G.small, rt_C.small</td>
<td align="left">無制限</td>
</tr>
</tbody>
</table>
<p>SpotおよびOn-demandで複数ノードを使用するジョブを実行する場合、ノード時間積（使用ノード数 &times; 実行時間）に以下の制約がかかります。</p>
<table>
<thead>
<tr>
<th align="left">サービス名</th>
<th align="left">ノード時間積の最大値</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Spot</td>
<td align="left">2304 nodes &middot; hours</td>
</tr>
<tr>
<td align="left">On-demand</td>
<td align="left">12 nodes &middot; hours</td>
</tr>
</tbody>
</table>
<p>Spotサービスでは、POSIX優先度を指定することで他ジョブより優先的に実行することが可能です。</p>
<table>
<thead>
<tr>
<th align="left">サービス名</th>
<th align="left">説明</th>
<th align="left">POSIX優先度</th>
<th align="left">POSIX優先度課金係数</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Spot</td>
<td align="left">デフォルト値</td>
<td align="left">-500</td>
<td align="left">1.0</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">優先実行</td>
<td align="left">-400</td>
<td align="left">1.5</td>
</tr>
</tbody>
</table>
<p>SpotサービスおよびOn-demandサービス毎の使用ABCIポイントの計算式は以下の通りです。</p>
<div class="codehilite"><pre>
ABCI point = サービス課金係数
           &times; 資源タイプ課金係数
           &times; 資源タイプ個数
           &times; POSIX 優先度課金係数
           &times; max(経過時間[秒], 最低経過時間[秒]) / 3600
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>小数点5位以下は切り捨てられます。</li>
<li>最低経過時間より短い経過時間ジョブを実行した場合、ABCIポイントは最低経過時間を元に計算されます。</li>
</ul>
</div>
<p>Reservedサービス毎の使用ABCIポイントの計算式は以下の通りです。</p>
<div class="codehilite"><pre>
ABCI point = サービス課金係数
           &times; 予約ノード数
           &times; 予約日数 &times; 24
</pre></div>

<h2 id="job-executing-options">3.3. ジョブ実行オプション</h2>
<p>バッチ利用の場合は、<code>qsub</code>コマンドを使用します。
インタラクティブ利用の場合は、<code>qrsh</code>コマンドを使用します。</p>
<p><code>qsub</code>コマンドおよび<code>qrsh</code>コマンドの主要なオプションを以下に示します。</p>
<table>
<thead>
<tr>
<th align="left">オプション</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-g <em>group</em></td>
<td align="left">ABCI利用グループを<em>group</em>で指定します。</td>
</tr>
<tr>
<td align="left">-l <em>resource_type</em>=<em>num</em></td>
<td align="left">資源タイプ<em>resource_type</em>と、その個数<em>num</em>を指定します。本オプションは指定必須です。</td>
</tr>
<tr>
<td align="left">-l h_rt=[<em>HH:MM:</em>]<em>SS</em></td>
<td align="left">経過時間制限値を指定します。[<em>HH:</em>MM:<em>]</em>SS*で指定することができます。ジョブの実行時間が指定した時間を超過した場合、ジョブは強制終了されます。</td>
</tr>
<tr>
<td align="left">-N <em>name</em></td>
<td align="left">ジョブ名を<em>name</em>で指定します。デフォルトは、ジョブスクリプト名です。</td>
</tr>
<tr>
<td align="left">-o <em>stdout_name</em></td>
<td align="left">標準出力名を<em>stdout_name</em>で指定します。</td>
</tr>
<tr>
<td align="left">-p <em>priority</em></td>
<td align="left">SpotサービスでPOSIX優先度を<em>priority</em>で指定します。</td>
</tr>
<tr>
<td align="left">-e <em>stderr_name</em></td>
<td align="left">標準エラー出力名を<em>stderr_name</em>で指定します。</td>
</tr>
<tr>
<td align="left">-j y</td>
<td align="left">標準エラー出力を標準出力にマージします。</td>
</tr>
<tr>
<td align="left">-m a</td>
<td align="left">ジョブが実行中止された場合にメールを送信します。</td>
</tr>
<tr>
<td align="left">-m b</td>
<td align="left">ジョブ実行開始時にメールを送信します。</td>
</tr>
<tr>
<td align="left">-m e</td>
<td align="left">ジョブ実行終了時にメールを送信します。</td>
</tr>
<tr>
<td align="left">-t <em>n</em>[<em>-m</em>[<em>:s</em>]]</td>
<td align="left">アレイジョブのタスクIDを<em>n</em>[<em>-m</em>[<em>:s</em>]]で指定します。<em>n</em>は開始番号、<em>m</em>は終了番号、<em>s</em>はステップサイズを表します。</td>
</tr>
<tr>
<td align="left">-hold_jid <em>job_id</em></td>
<td align="left">依存関係にあるジョブIDを<em>job_id</em>で指定します。指定された依存ジョブが終了するまでジョブは実行開始されません。</td>
</tr>
<tr>
<td align="left">-ar <em>ar_id</em></td>
<td align="left">予約した計算ノードを利用する際に予約ID(AR-ID)を<em>ar_id</em>で指定します。</td>
</tr>
</tbody>
</table>
<h2 id="interactive-jobs">3.4. インタラクティブ利用</h2>
<p>インタラクティブジョブを実行する場合は、<code>qrsh</code>コマンドを使用します。
インタラクティブジョブ実行時にABCIポイントが不足している場合、インタラクティブジョブの実行に失敗します。</p>
<div class="codehilite"><pre><span></span><span class="err">$</span><span class="w"> </span><span class="n">qrsh</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">resource_type</span><span class="o">=</span><span class="n">num</span><span class="w"> </span><span class="o">[</span><span class="n">options</span><span class="o">]</span><span class="w"></span>
</pre></div>


<p>例) インタラクティブジョブを実行</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qrsh</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="n">grpname</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">rt_F</span><span class="o">=</span><span class="mi">1</span><span class="w"></span>
<span class="o">[</span><span class="n">username@g0001 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span>
</pre></div>


<p>X Window を利用するアプリケーションを実行する場合は、
インタラクティブノードへX転送を有効にして（<code>-X</code>もしくは<code>-Y</code>オプションを指定して）ログインします。</p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="n">yourpc</span> <span class="o">~</span><span class="p">]</span><span class="err">$</span> <span class="n">ssh</span> <span class="o">-</span><span class="n">XC</span> <span class="o">-</span><span class="n">p</span> <span class="mi">10022</span> <span class="o">-</span><span class="n">l</span> <span class="n">username</span> <span class="n">localhost</span>
</pre></div>


<p>インタラクティブジョブを投入する際に<code>-pty yes -display $DISPLAY -v TERM /bin/bash</code>を指定します。</p>
<div class="codehilite"><pre><span></span><span class="n">[username</span><span class="o">@</span><span class="n">es1</span> <span class="o">~</span><span class="n">]</span><span class="o">$</span> <span class="n">qrsh</span> <span class="o">-</span><span class="n">g</span> <span class="n">grpname</span> <span class="o">-</span><span class="n">l</span> <span class="n">rt_F</span><span class="o">=</span><span class="m">1</span> <span class="o">-</span><span class="n">pty</span> <span class="n">yes</span> <span class="o">-</span><span class="n">display</span> <span class="o">$</span><span class="n">DISPLAY</span> <span class="o">-</span><span class="n">v</span> <span class="n">TERM</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="n">[username</span><span class="o">@</span><span class="n">g0001</span> <span class="o">~</span><span class="n">]</span><span class="o">$</span> <span class="n">xterm</span> <span class="o">&lt;-</span> <span class="n">Xアプリケーションを起動</span>
</pre></div>


<h2 id="batch-jobs">3.5. バッチ利用</h2>
<p>ABCIシステムをバッチ利用する場合、実行するプログラムとは別にジョブスクリプトを作成します。
ジョブスクリプトには利用する資源タイプ名、経過時間制限値などの資源などのジョブ実行オプションを記述した上で、
実行するコマンド列を記載します。</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#$ -l rt_F=1</span>
<span class="c1">#$ -l h_rt=1:23:45</span>
<span class="c1">#$ -j y</span>
<span class="c1">#$ -cwd</span>

<span class="o">[</span>Environment Modules の初期化<span class="o">]</span>
<span class="o">[</span>Environment Modules の設定<span class="o">]</span>
<span class="o">[</span>プログラムの実行<span class="o">]</span>
</pre></div>


<p>例) CUDAを利用したプログラムを実行するジョブスクリプト例</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#$-l rt_F=1</span>
<span class="c1">#$-j y</span>
<span class="c1">#$-cwd</span>

<span class="nb">source</span> /etc/profile.d/modules.sh
module load cuda/9.2/9.2.88.1
./a.out
</pre></div>


<h3 id="submit-a-batch-job">3.5.1. バッチジョブの投入</h3>
<p>バッチジョブを実行する場合、<code>qsub</code>コマンドを使用します。
バッチジョブ投入時にABCIポイントが不足している場合、バッチジョブの投入に失敗します。</p>
<div class="codehilite"><pre><span></span><span class="err">$</span><span class="w"> </span><span class="n">qsub</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="o">[</span><span class="n">options</span><span class="o">]</span><span class="w"> </span><span class="n">script_name</span><span class="w"></span>
</pre></div>


<p>例) ジョブスクリプトrun.shをバッチジョブとして投入</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qsub</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="n">grpname</span><span class="w"> </span><span class="n">run</span><span class="p">.</span><span class="n">sh</span><span class="w"></span>
<span class="n">Your</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="mi">12345</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;run.sh&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">submitted</span><span class="w"></span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>-g</code>オプションは、ジョブスクリプト内には指定できません。</p>
</div>
<h3 id="show-the-status-of-batch-jobs">3.5.2. バッチジョブの状態の確認</h3>
<p>バッチジョブを状態を確認するには、<code>qstat</code>コマンドを利用します。</p>
<div class="codehilite"><pre><span></span><span class="err">$</span><span class="w"> </span><span class="n">qstat</span><span class="w"> </span><span class="o">[</span><span class="n">options</span><span class="o">]</span><span class="w"></span>
</pre></div>


<p><code>qstat</code>コマンドの主要なオプションを以下に示します。</p>
<table>
<thead>
<tr>
<th align="left">オプション</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-r</td>
<td align="left">ジョブのリソース情報を表示します。</td>
</tr>
<tr>
<td align="left">-j</td>
<td align="left">ジョブに関する追加情報を表示します。</td>
</tr>
</tbody>
</table>
<p>例)</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qstat</span><span class="w"></span>
<span class="n">job</span><span class="o">-</span><span class="n">ID</span><span class="w">     </span><span class="k">prior</span><span class="w">   </span><span class="n">name</span><span class="w">       </span><span class="k">user</span><span class="w">         </span><span class="k">state</span><span class="w"> </span><span class="n">submit</span><span class="o">/</span><span class="k">start</span><span class="w"> </span><span class="k">at</span><span class="w">     </span><span class="n">queue</span><span class="w">                          </span><span class="n">jclass</span><span class="w">                         </span><span class="n">slots</span><span class="w"> </span><span class="n">ja</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="n">ID</span><span class="w"></span>
<span class="c1">------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="w">     </span><span class="mi">12345</span><span class="w"> </span><span class="mf">0.25586</span><span class="w"> </span><span class="n">run</span><span class="p">.</span><span class="n">sh</span><span class="w">     </span><span class="n">username</span><span class="w">     </span><span class="n">r</span><span class="w">     </span><span class="mi">06</span><span class="o">/</span><span class="mi">27</span><span class="o">/</span><span class="mi">2018</span><span class="w"> </span><span class="mi">21</span><span class="err">:</span><span class="mi">14</span><span class="err">:</span><span class="mi">49</span><span class="w"> </span><span class="n">gpu</span><span class="nv">@g0001</span><span class="w">                                                        </span><span class="mi">80</span><span class="w"></span>
</pre></div>


<table>
<thead>
<tr>
<th align="left">項目</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">job-ID</td>
<td align="left">ジョブID</td>
</tr>
<tr>
<td align="left">prior</td>
<td align="left">ジョブ優先度</td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">ジョブ名</td>
</tr>
<tr>
<td align="left">user</td>
<td align="left">ジョブのオーナー</td>
</tr>
<tr>
<td align="left">state</td>
<td align="left">ジョブ状態 (r: 実行中、qw: 待機中、d: 削除中、E: エラー状態)</td>
</tr>
<tr>
<td align="left">submit/start at</td>
<td align="left">ジョブ投入/開始時刻</td>
</tr>
<tr>
<td align="left">queue</td>
<td align="left">キュー名</td>
</tr>
<tr>
<td align="left">jclass</td>
<td align="left">ジョブクラス名</td>
</tr>
<tr>
<td align="left">slots</td>
<td align="left">ジョブスロット数 (ノード数 x 80)</td>
</tr>
<tr>
<td align="left">ja-task-ID</td>
<td align="left">アレイジョブのタスクID</td>
</tr>
</tbody>
</table>
<h3 id="delete-a-batch-job">3.5.3. バッチジョブの削除</h3>
<p>バッチジョブを削除するには、<code>qdel</code>コマンドを利用します。</p>
<div class="codehilite"><pre><span></span>$ qdel job_id
</pre></div>


<p>例) バッチジョブを削除</p>
<div class="codehilite"><pre><span></span>[<span class="nv">username</span>@<span class="nv">es1</span> <span class="o">~</span>]$ <span class="nv">qstat</span>
<span class="nv">job</span><span class="o">-</span><span class="nv">ID</span>     <span class="nv">prior</span>   <span class="nv">name</span>       <span class="nv">user</span>         <span class="nv">state</span> <span class="nv">submit</span><span class="o">/</span><span class="nv">start</span> <span class="nv">at</span>     <span class="nv">queue</span>                          <span class="nv">jclass</span>                         <span class="nv">slots</span> <span class="nv">ja</span><span class="o">-</span><span class="nv">task</span><span class="o">-</span><span class="nv">ID</span>
<span class="o">------------------------------------------------------------------------------------------------------------------------------------------------</span>
     <span class="mi">12345</span> <span class="mi">0</span>.<span class="mi">25586</span> <span class="nv">run</span>.<span class="nv">sh</span>     <span class="nv">username</span>     <span class="nv">r</span>     <span class="mi">06</span><span class="o">/</span><span class="mi">27</span><span class="o">/</span><span class="mi">2018</span> <span class="mi">21</span>:<span class="mi">14</span>:<span class="mi">49</span> <span class="nv">gpu</span>@<span class="nv">g0001</span>                                                        <span class="mi">80</span>
[<span class="nv">username</span>@<span class="nv">es1</span> <span class="o">~</span>]$ <span class="nv">qdel</span> <span class="mi">12345</span>
<span class="nv">username</span> <span class="nv">has</span> <span class="nv">registered</span> <span class="nv">the</span> <span class="nv">job</span> <span class="mi">12345</span> <span class="k">for</span> <span class="nv">deletion</span>
</pre></div>


<h3 id="stdout-and-stderr-of-batch-jobs">3.5.4. バッチジョブの標準出力と標準エラー出力</h3>
<p>バッチジョブの標準出力ファイルと標準エラー出力ファイルは、ジョブ実行ディレクトリもしくは、
ジョブ投入時に指定されたファイルに出力されます。
標準出力ファイルにはジョブ実行中の標準出力、標準エラー出力ファイルにはジョブ実行中のエラーメッセージが出力されます。
ジョブ投入時に、標準出力ファイル、標準エラー出力ファイルを指定しなかった場合は、以下のファイルに出力されます。</p>
<ul>
<li><em>(job_name)</em>.o<em>(job_id)</em>  ---  標準出力ファイル</li>
<li><em>(job_name)</em>.e<em>(job_id)</em>  ---  標準エラー出力ファイル</li>
</ul>
<p>例）ジョブ名がrun.sh、ジョブIDが12345の場合</p>
<ul>
<li>標準出力ファイル名：run.sh.o12345</li>
<li>標準エラー出力ファイル名：run.sh.e12345</li>
</ul>
<h3 id="report-batch-job-accounting">3.5.5. バッチジョブの統計情報出力</h3>
<p>バッチジョブの統計情報を出力するには、<code>qacct</code>コマンドを利用します。</p>
<div class="codehilite"><pre><span></span><span class="err">$</span><span class="w"> </span><span class="n">qacct</span><span class="w"> </span><span class="o">[</span><span class="n">options</span><span class="o">]</span><span class="w"></span>
</pre></div>


<p><code>qacct</code>コマンドの主要なオプションを以下に示します。</p>
<table>
<thead>
<tr>
<th align="left">オプション</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-g <em>group</em></td>
<td align="left"><em>group</em>のジョブに関する情報を表示します。</td>
</tr>
<tr>
<td align="left">-j <em>job_id</em></td>
<td align="left"><em>job_id</em>のジョブに関する情報を表示します。</td>
</tr>
<tr>
<td align="left">-t <em>n</em>[<em>-m</em>[<em>:s</em>]]</td>
<td align="left">アレイジョブのタスクIDを<em>n</em>[<em>-m</em>[<em>:s</em>]]で指定します。指定されたタスクIDにマッチするジョブの情報のみ表示されます。本オプションは-jオプションを指定した場合のみ使用可能です。</td>
</tr>
</tbody>
</table>
<p>例) バッチジョブの統計情報を参照</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qacct</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="mi">12345</span><span class="w"></span>
<span class="o">==============================================================</span><span class="w"></span>
<span class="n">qname</span><span class="w">        </span><span class="n">gpu</span><span class="w"></span>
<span class="n">hostname</span><span class="w">     </span><span class="n">g0001</span><span class="w"></span>
<span class="k">group</span><span class="w">        </span><span class="k">group</span><span class="w"> </span>
<span class="n">owner</span><span class="w">        </span><span class="n">username</span><span class="w"></span>
<span class="n">project</span><span class="w">      </span><span class="k">group</span><span class="w"> </span>
<span class="n">department</span><span class="w">   </span><span class="k">group</span><span class="w"></span>
<span class="n">jobname</span><span class="w">      </span><span class="n">run</span><span class="p">.</span><span class="n">sh</span><span class="w"></span>
<span class="n">jobnumber</span><span class="w">    </span><span class="mi">12345</span><span class="w"></span>
<span class="n">taskid</span><span class="w">       </span><span class="n">undefined</span><span class="w"></span>
<span class="n">account</span><span class="w">      </span><span class="n">username</span><span class="w"></span>
<span class="n">priority</span><span class="w">     </span><span class="mi">0</span><span class="w"></span>
<span class="n">cwd</span><span class="w">          </span><span class="k">NONE</span><span class="w"></span>
<span class="n">submit_host</span><span class="w">  </span><span class="n">es1</span><span class="p">.</span><span class="n">abci</span><span class="p">.</span><span class="k">local</span><span class="w"></span>
<span class="n">submit_cmd</span><span class="w">   </span><span class="o">/</span><span class="n">bb</span><span class="o">/</span><span class="k">system</span><span class="o">/</span><span class="n">uge</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">lx</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">qsub</span><span class="w"> </span><span class="o">-</span><span class="n">P</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">h_rt</span><span class="o">=</span><span class="mi">600</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">rt_F</span><span class="o">=</span><span class="mi">1</span><span class="w"></span>
<span class="n">qsub_time</span><span class="w">    </span><span class="mi">07</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2018</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">55</span><span class="err">:</span><span class="mf">14.706</span><span class="w"></span>
<span class="n">start_time</span><span class="w">   </span><span class="mi">07</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2018</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">55</span><span class="err">:</span><span class="mf">18.170</span><span class="w"></span>
<span class="n">end_time</span><span class="w">     </span><span class="mi">07</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2018</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">55</span><span class="err">:</span><span class="mf">18.190</span><span class="w"></span>
<span class="n">granted_pe</span><span class="w">   </span><span class="n">perack17</span><span class="w"></span>
<span class="n">slots</span><span class="w">        </span><span class="mi">80</span><span class="w"></span>
<span class="n">failed</span><span class="w">       </span><span class="mi">0</span><span class="w"></span>
<span class="n">deleted_by</span><span class="w">   </span><span class="k">NONE</span><span class="w"></span>
<span class="n">exit_status</span><span class="w">  </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_wallclock</span><span class="w"> </span><span class="mf">0.020</span><span class="w"></span>
<span class="n">ru_utime</span><span class="w">     </span><span class="mf">0.010</span><span class="w"></span>
<span class="n">ru_stime</span><span class="w">     </span><span class="mf">0.013</span><span class="w"></span>
<span class="n">ru_maxrss</span><span class="w">    </span><span class="mi">6480</span><span class="w"></span>
<span class="n">ru_ixrss</span><span class="w">     </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_ismrss</span><span class="w">    </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_idrss</span><span class="w">     </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_isrss</span><span class="w">     </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_minflt</span><span class="w">    </span><span class="mi">1407</span><span class="w"></span>
<span class="n">ru_majflt</span><span class="w">    </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_nswap</span><span class="w">     </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_inblock</span><span class="w">   </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_oublock</span><span class="w">   </span><span class="mi">8</span><span class="w"></span>
<span class="n">ru_msgsnd</span><span class="w">    </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_msgrcv</span><span class="w">    </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_nsignals</span><span class="w">  </span><span class="mi">0</span><span class="w"></span>
<span class="n">ru_nvcsw</span><span class="w">     </span><span class="mi">13</span><span class="w"></span>
<span class="n">ru_nivcsw</span><span class="w">    </span><span class="mi">1</span><span class="w"></span>
<span class="n">wallclock</span><span class="w">    </span><span class="mf">3.768</span><span class="w"></span>
<span class="n">cpu</span><span class="w">          </span><span class="mf">0.022</span><span class="w"></span>
<span class="n">mem</span><span class="w">          </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">io</span><span class="w">           </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">iow</span><span class="w">          </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">ioops</span><span class="w">        </span><span class="mi">0</span><span class="w"></span>
<span class="n">maxvmem</span><span class="w">      </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">maxrss</span><span class="w">       </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">maxpss</span><span class="w">       </span><span class="mf">0.000</span><span class="w"></span>
<span class="n">arid</span><span class="w">         </span><span class="n">undefined</span><span class="w"></span>
<span class="n">jc_name</span><span class="w">      </span><span class="k">NONE</span><span class="w"></span>
</pre></div>


<p>主な表示項目は以下の通りです。
その他項目の詳細は<code>man sge_accounting</code>を参照ください。</p>
<table>
<thead>
<tr>
<th align="left">項目</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">jobnunmber</td>
<td align="left">ジョブID</td>
</tr>
<tr>
<td align="left">taskid</td>
<td align="left">アレイジョブのタスクID</td>
</tr>
<tr>
<td align="left">qsub_time</td>
<td align="left">ジョブの実行投入時刻</td>
</tr>
<tr>
<td align="left">start_time</td>
<td align="left">ジョブの実行開始時刻</td>
</tr>
<tr>
<td align="left">end_time</td>
<td align="left">ジョブの実行終了時刻</td>
</tr>
<tr>
<td align="left">failed</td>
<td align="left">ジョブスケジューラのジョブ終了コード</td>
</tr>
<tr>
<td align="left">exit_status</td>
<td align="left">ジョブの終了ステータス</td>
</tr>
<tr>
<td align="left">wallclock</td>
<td align="left">ジョブの実行時間(前後処理を含む)</td>
</tr>
</tbody>
</table>
<h3 id="environment-variables">3.5.6. 環境変数</h3>
<p>ジョブ実行中に、ジョブスクリプトもしくはコマンドラインで利用できる環境変数は以下の通りです。</p>
<table>
<thead>
<tr>
<th align="left">環境変数</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ENVIRONMENT</td>
<td align="left">ジョブの場合、"BATCH"が割り当てられる</td>
</tr>
<tr>
<td align="left">JOB_ID</td>
<td align="left">ジョブID</td>
</tr>
<tr>
<td align="left">JOB_NAME</td>
<td align="left">ジョブ名</td>
</tr>
<tr>
<td align="left">JOB_SCRIPT</td>
<td align="left">ジョブスクリプト名</td>
</tr>
<tr>
<td align="left">NHOSTS</td>
<td align="left">ジョブに割り当てられたホスト数</td>
</tr>
<tr>
<td align="left">PE_HOSTFILE</td>
<td align="left">ジョブに割り当てられたホスト、スロット、キュー名が記載されたファイルへのパス</td>
</tr>
<tr>
<td align="left">RESTARTED</td>
<td align="left">ジョブが再実行された場合は1、それ以外は0</td>
</tr>
<tr>
<td align="left">SGE_JOB_HOSTLIST</td>
<td align="left">ジョブに割り当てられたホストが記載されたファイルへのパス</td>
</tr>
<tr>
<td align="left">SGE_LOCALDIR</td>
<td align="left">ジョブに割り当てられたローカルストレージへのパス</td>
</tr>
<tr>
<td align="left">SGE_O_WORKDIR</td>
<td align="left">ジョブ投入時の作業ディレクトリへのパス</td>
</tr>
<tr>
<td align="left">SGE_TASK_ID</td>
<td align="left">アレイジョブのタスクID(アレイジョブでない場合は"undefined")</td>
</tr>
<tr>
<td align="left">SGE_TASK_FIRST</td>
<td align="left">アレイジョブの最初のタスクID</td>
</tr>
<tr>
<td align="left">SGE_TASK_LAST</td>
<td align="left">アレイジョブの最後のタスクID</td>
</tr>
<tr>
<td align="left">SGE_TASK_STEPSIZE</td>
<td align="left">アレイジョブのステップサイズ</td>
</tr>
</tbody>
</table>
<h2 id="reservation">3.6. 事前予約</h2>
<p>Reservedサービスでは、計算ノードを事前に予約することができ、計画的なジョブ実行が可能となります。</p>
<table>
<thead>
<tr>
<th align="left">項目</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">最小予約日数</td>
<td align="left">1日</td>
</tr>
<tr>
<td align="left">最大予約日数</td>
<td align="left">30日</td>
</tr>
<tr>
<td align="left">システムあたりの最大同時予約可能ノード数</td>
<td align="left">442ノード</td>
</tr>
<tr>
<td align="left">1予約あたりの最大予約ノード数</td>
<td align="left">32</td>
</tr>
<tr>
<td align="left">1予約あたりの最大予約ノード時間積</td>
<td align="left">12,288ノード時間積</td>
</tr>
<tr>
<td align="left">予約受付開始時刻</td>
<td align="left">30日前の午前10時</td>
</tr>
<tr>
<td align="left">予約受付締切時刻</td>
<td align="left">予約開始前日の午後9時</td>
</tr>
<tr>
<td align="left">予約取消受付期間</td>
<td align="left">予約開始前日の午後9時</td>
</tr>
<tr>
<td align="left">予約開始時刻</td>
<td align="left">予約開始日の午前10時</td>
</tr>
<tr>
<td align="left">予約終了時刻</td>
<td align="left">予約終了日の午前9時30分</td>
</tr>
</tbody>
</table>
<h3 id="make-a-reservation">3.6.1. 予約の実行</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>計算ノードの予約は、利用責任者もしくは利用管理者のみが実施できます。</p>
</div>
<p>計算ノードを予約するには、<a href="https://portal.abci.ai/user/">ABCI利用ポータル</a>もしくは<code>qrsub</code>コマンドを使用します。</p>
<div class="codehilite"><pre><span></span>$ qrsub options
</pre></div>


<table>
<thead>
<tr>
<th align="left">オプション</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-a <em>YYYYMMDD</em></td>
<td align="left">予約開始日を<em>YYYYMMDD</em>で指定します。</td>
</tr>
<tr>
<td align="left">-d <em>days</em></td>
<td align="left">予約日数を<em>days</em>で指定します。 -eオプションとは排他です。</td>
</tr>
<tr>
<td align="left">-e <em>YYYYMMDD</em></td>
<td align="left">予約終了日を<em>YYYYMMDD</em>指定します。-dオプションとは排他です。</td>
</tr>
<tr>
<td align="left">-g <em>group</em></td>
<td align="left">ABCI利用グループを<em>group</em>で指定します。</td>
</tr>
<tr>
<td align="left">-N <em>name</em></td>
<td align="left">予約名を<em>name</em>で指定します。英数字およびアンダーバーのみ指定可能で、最大64文字まで指定できます。</td>
</tr>
<tr>
<td align="left">-n <em>nnnode</em></td>
<td align="left">予約するノード数を<em>nnnode</em>で指定します。</td>
</tr>
</tbody>
</table>
<p>例) 2018年7月5日から1週間 (7日間) 計算ノード4台を予約</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qrsub</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="mi">20180705</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="n">grpname</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">-</span><span class="n">N</span><span class="w"> </span><span class="ss">&quot;Reserve_for_AI&quot;</span><span class="w"></span>
<span class="n">Your</span><span class="w"> </span><span class="n">advance</span><span class="w"> </span><span class="n">reservation</span><span class="w"> </span><span class="mi">12345</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">granted</span><span class="w"></span>
</pre></div>


<p>計算ノードの予約が完了した時点でABCIポイントを消費します。</p>
<h3 id="show-the-status-of-reservations">3.6.2. 予約状態の確認</h3>
<p>予約状態を確認するには、<a href="https://portal.abci.ai/user/">ABCI利用ポータル</a>もしくは<code>qrstat</code>コマンドを使用します。</p>
<p>例)</p>
<div class="codehilite"><pre><span></span>[<span class="nv">username</span>@<span class="nv">es1</span> <span class="o">~</span>]$ <span class="nv">qrstat</span>
<span class="nv">ar</span><span class="o">-</span><span class="nv">id</span>      <span class="nv">name</span>       <span class="nv">owner</span>        <span class="nv">state</span> <span class="nv">start</span> <span class="nv">at</span>             <span class="k">end</span> <span class="nv">at</span>               <span class="nv">duration</span>    <span class="nv">sr</span>
<span class="o">----------------------------------------------------------------------------------------------------</span>
     <span class="mi">12345</span> <span class="nv">Reserve_fo</span> <span class="nv">root</span>         <span class="nv">w</span>     <span class="mi">07</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">2018</span> <span class="mi">10</span>:<span class="mi">00</span>:<span class="mi">00</span>  <span class="mi">07</span><span class="o">/</span><span class="mi">12</span><span class="o">/</span><span class="mi">2018</span> <span class="mi">09</span>:<span class="mi">30</span>:<span class="mi">00</span>  <span class="mi">167</span>:<span class="mi">30</span>:<span class="mi">00</span>    <span class="nv">false</span>
</pre></div>


<table>
<thead>
<tr>
<th align="left">項目</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ar-id</td>
<td align="left">予約ID (AR-ID)</td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">予約名</td>
</tr>
<tr>
<td align="left">owner</td>
<td align="left">常にrootと表示</td>
</tr>
<tr>
<td align="left">state</td>
<td align="left">予約状態</td>
</tr>
<tr>
<td align="left">start at</td>
<td align="left">予約開始日 (予約開始時刻は常に午前10時)</td>
</tr>
<tr>
<td align="left">end at</td>
<td align="left">予約終了日 (予約終了時刻は常に午前9時30分)</td>
</tr>
<tr>
<td align="left">duration</td>
<td align="left">予約期間 (hhh:mm:ss)</td>
</tr>
<tr>
<td align="left">sr</td>
<td align="left">常にfalseと表示</td>
</tr>
</tbody>
</table>
<p>システムあたりの予約可能ノード数を確認するには、<a href="https://portal.abci.ai/user/">ABCI利用ポータル</a>もしくは<code>qrstat</code>コマンドの<code>--available</code>オプションを使用します。</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qrstat</span><span class="w"> </span><span class="c1">--available</span>
<span class="mi">06</span><span class="o">/</span><span class="mi">27</span><span class="o">/</span><span class="mi">2018</span><span class="w">  </span><span class="mi">441</span><span class="w"></span>
<span class="mi">07</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">2018</span><span class="w">  </span><span class="mi">432</span><span class="w"></span>
<span class="mi">07</span><span class="o">/</span><span class="mi">06</span><span class="o">/</span><span class="mi">2018</span><span class="w">  </span><span class="mi">434</span><span class="w"></span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>計算ノードが予約されていない日付は表示されません。</p>
</div>
<h3 id="cancel-a-reservation">3.6.3. 予約の取り消し</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>予約の取消は利用責任者もしくは利用管理者のみが実施できます。</p>
</div>
<p>予約を取り消すには、<a href="https://portal.abci.ai/user/">ABCI利用ポータル</a>もしくは<code>qrdel</code>コマンドを使用します。</p>
<p>例) 予約を取消</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">username@es1 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">qrdel</span><span class="w"> </span><span class="mi">12345</span><span class="w"></span>
</pre></div></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../02/" title="2. ABCIシステム利用環境" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">前</span>2. ABCIシステム利用環境</span></div></a><a href="../04/" title="4. ストレージ" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">次</span>4. ストレージ</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright"><div class="md-footer-copyright__highlight">Copyright &copy; 2018 National Institute of Advanced Industrial Science and Technology (AIST)</div>powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div></div></div></footer></div><script src="../assets/javascripts/application.b260a35d.js"></script><script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script><script src="../assets/javascripts/lunr/tinyseg.js"></script><script src="../assets/javascripts/lunr/lunr.ja.js"></script><script>app.initialize({version:"1.0.4",url:{base:".."}})</script></body></html>